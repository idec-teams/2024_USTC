"use strict";(self.webpackChunk_2024_ustc=self.webpackChunk_2024_ustc||[]).push([["vendors-node_modules_ef-core_src_ef-core_js"],{898:(e,t,n)=>{n.d(t,{vt:()=>xe});const r=Array,o=r.prototype,s={copy:e=>o.slice.call(e,0),empty:e=>(e.length=0,e),equals(e,t){if(!r.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},pop:e=>o.pop.call(e),push:(e,...t)=>o.push.apply(e,t),remove(e,t){const n=o.indexOf.call(e,t);if(n>-1)return o.splice.call(e,n,1),t},reverse:e=>o.reverse.call(e),shift:e=>o.shift.call(e),slice:(e,t,n)=>o.slice.call(e,t,n),sort:(e,t)=>o.sort.call(e,t),splice:(e,...t)=>o.splice.call(e,...t),unshift:(e,...t)=>o.unshift.apply(e,t),isArray:e=>r.isArray(e)},a=[];let c=0;const i={first:null,last:null},l={first:null,last:null},u=(e,t)=>{t!==e.last&&(t.__next&&(t.__next.__prev=t.__prev),t.__prev&&(t.__prev.__next=t.__next),e.first?t===e.first&&(e.first=t.__next):e.first=t,e.last&&(e.last.__next=t,t.__prev=e.last),e.last=t,e.first.__prev=null,e.last.__next=null)},d=e=>{let t=e.first;if(!t)return;const n=[];for(;t;){const e=t.__next;t.__prev=null,t.__next=null,n.push(t),t=e}e.first=null,e.last=null;for(let e of n)e()},p=(...e)=>{for(let t of e)u(i,t)},f=e=>{u(l,e)},h=()=>(c+=1,c),m=e=>{if(!e&&(c-=1)>0)return c;for(c=1;i.first;)d(i);for(;l.first;)d(l);if(c=0,a.length){const e=s.copy(a);s.empty(a),setTimeout((()=>{for(let t of e)t()}),0)}return c},b=(e,...t)=>{for(let n of t)for(let t in n)e[t]=n[t];return e},y=Object.assign||b,_=(e,t)=>e[t]||((e,t)=>{const n={};return Object.defineProperty(t,e,{get:()=>n,set(e){h(),y(n,e),m()},configurable:!1,enumerable:!0}),n})(t,e),v=({_path:e,_key:t,data:n,handlers:r,subscribers:o,innerData:s})=>{const a=((e,t)=>e.reduce(_,t))(e,n),{handlerNode:c,subscriberNode:i,dataNode:l}=(({_path:e,handlers:t,subscribers:n,innerData:r})=>{for(let o of e)t[o]||(t[o]={}),n[o]||(n[o]={}),r[o]||(r[o]={}),t=t[o],n=n[o],r=r[o];return{handlerNode:t,subscriberNode:n,dataNode:r}})({_path:e,handlers:r,subscribers:o,innerData:s});let u=c[t],d=i[t];return d||(u=c[t]=[],d=i[t]=[]),Object.prototype.hasOwnProperty.call(l,t)||(l[t]=a[t]),{parentNode:a,handlerNode:u,subscriberNode:d,dataNode:l}},g=e=>e!=e,$=()=>{},N=(()=>{if("undefined"==typeof console){if("undefined"==typeof print)return{log:$,info:$,warn:$,error:$};const e=(e,t)=>`[EF][${e}] ${t.join(" ")}`;return{log:(...t)=>print(e("LOG ",t)),info:(...t)=>print(e("INFO",t)),warn:(...t)=>print(e("WARN",t)),error:(...t)=>print(e("ERROR",t))}}const e="[EF] %s";return{log:console.log&&console.log.bind(console,e)||$,info:console.info&&console.info.bind(console,e)||$,warn:console.warn&&console.warn.bind(console,e)||$,error:console.error&&console.error.bind(console,e)||$}})(),x=(e,{bind:t})=>{const n=s.copy(t[0]),r=n.pop(),{data:o,handlers:a,subscribers:c,innerData:i}=e,{parentNode:l,handlerNode:u,subscriberNode:d,dataNode:f}=v({_path:n,_key:r,data:o,handlers:a,subscribers:c,innerData:i}),b=Object.getOwnPropertyDescriptor(l,r);return b&&(b.get||b.set)||((e,{parentNode:t,dataNode:n,handlerNode:r,subscriberNode:o,_key:s})=>{const{state:a}=e,c=()=>p(...r);let i=!1;Object.defineProperty(t,s,{get:()=>n[s],set(e){const t=n[s];if(!(i||t===e||g(t)&&g(e))){if(i=!0,n[s]=e,h(),p(c),o.length>0)try{for(const n of o)n({state:a,value:e,oldValue:t})}catch(e){N.error("Error caught when executing subscribers:\n",e)}m(),i=!1}},enumerable:!0}),p(c)})(e,{parentNode:l,dataNode:f,handlerNode:u,subscriberNode:d,_key:r}),t.length>1&&void 0===f[r]&&(l[r]=t[1]),{dataNode:f,parentNode:l,handlerNode:u,subscriberNode:d,_key:r}},E=(e,t)=>e.constructor===t;const k="undefined"!=typeof document&&"undefined"!=typeof Node,w={BEFORE:"before",AFTER:"after",APPEND:"append",REPLACE:"replace"},O={},A="__ef_mount_point__",T={},C=[],S=[],F=e=>{const t=C.pop()||T.document.createDocumentFragment();return e(t,(()=>{C.push(t)}))},I=e=>{const t=S.pop()||T.document.createTextNode("");return e(t,(()=>{S.push(t)}))},j=class{constructor(){this.$children=[],this.$safeZone=T.document.createDocumentFragment()}append(...e){T.append(this.$safeZone,...e),s.push(this.$children,...e)}appendTo(e){T.append(e,...this.$children)}addBefore(e){T.before(e,...this.$children)}removeChild(e){T.remove(e),s.remove(this.$children,e)}remove(){T.append(this.$safeZone,...this.$children)}get firstElement(){return this.$children[0]||null}},P=(e,t)=>{const{element:n,placeholder:r}=e.$ctx.nodeInfo;T.append(t,n,r)},D=(e,t)=>{const{element:n,placeholder:r}=e.$ctx.nodeInfo;T.before(t,n,r)},B=(e,t,n)=>{if(3!==e.nodeType)return;const r=e[A];if(!r)return;const{node:o}=r;if(o){if(h(),n)if(s.isArray(o))for(let e of o)D(e,n);else D(o,n);else if(s.isArray(o))for(let e of o)P(e,t);else P(o,t);m()}},R=(e,t)=>{h();for(let n of t)T.isNodeInstance(n)?(e.appendChild(n),B(n,e)):E(n,j)?n.appendTo(e):n instanceof O.EFBaseComponent&&n.$mount({target:e});m()};T.isNodeInstance=e=>T.isNode?T.isNode(e):!(!e||!e.nodeType),T.before=(e,...t)=>{const n=e.parentNode,r=t[0];1!==t.length||!T.isNodeInstance(r)||3===r.nodeType&&r[A]?11===n.nodeType?((e,t)=>{const n=e.parentNode;h();for(let r of t)T.isNodeInstance(r)?(n.insertBefore(r,e),B(r,n,e)):E(r,j)?r.addBefore(e):r instanceof O.EFBaseComponent&&r.$mount({target:e,option:w.BEFORE});m()})(e,t):F(((r,o)=>{h(),R(r,t),I(((t,s)=>{n.insertBefore(t,e),f((()=>{n.insertBefore(r,t),n.removeChild(t),s(),o()}))})),m()})):n.insertBefore(t[0],e)},T.after=(e,...t)=>e.nextSibling?T.before(e.nextSibling,...t):T.append(e.parentNode,...t),T.append=(e,...t)=>{if(!T.isNodeInstance(e))return e instanceof O.EFBaseComponent?s.isArray(e.children)?void e.children.push(...t):void 0:void e.append(...t);1===t.length&&T.isNodeInstance(t[0])?(e.appendChild(t[0]),B(t[0],e)):11===e.nodeType?R(e,t):1!==e.nodeType&&9!==e.nodeType||F(((n,r)=>{h(),R(n,t),I(((t,o)=>{e.appendChild(t),f((()=>{e.insertBefore(n,t),e.removeChild(t),o(),r()}))})),m()}))},T.remove=e=>{T.isNodeInstance(e)?e.parentNode&&e.parentNode.removeChild(e):e instanceof O.EFBaseComponent?e.$umount():E(e,j)&&e.remove()};k&&(e=>{y(T,e);const t=T.document.createTextNode("");T.textNodeSupportsEvent=!!t.addEventListener,T.passiveSupported=!1,T.onceSupported=!1;try{const e=Object.create({},{passive:{get:()=>(T.passiveSupported=!0,T.passiveSupported)},once:{get:()=>(T.onceSupported=!0,T.onceSupported)}});T.document.addEventListener("__ef_event_option_test__",$,e),T.document.removeEventListener("__ef_event_option_test__",$,e)}catch(e){}})({document,Node});const L=(e,t={})=>{const n=T.document.createEvent&&T.document.createEvent("CustomEvent")||new Event(e,t);return n.initEvent&&n.initEvent(e,t.bubbles,t.cancelable,t),n},M={xml:"http://www.w3.org/XML/1998/namespace",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink"},U=e=>{if(M[e])return M[e];throw new Error(`[EF] Namespace "${e}" has not been declared.`)},q=e=>{const t={};return n=>t[n]||(t[n]=e(n))},K=q((e=>e.indexOf(":")>=0)),V=q((e=>e.split(":"))),Z=q((e=>["foreignobject","desc","title"].indexOf(e.toLowerCase())>-1)),G=e=>["number","boolean","string"].indexOf(typeof e)>-1,W=(e,t,n,r,o,s,a)=>{const c=((e,t,n,r,o)=>{switch(e){case"string":if(t===n&&r&&r.is&&"string"==typeof r.is){const{is:e}=r;return o?T.document.createElementNS(o,n,{is:e}):T.document.createElement(n,{is:e})}return o?T.document.createElementNS(o,n):T.document.createElement(n);case"function":return new n;default:if(n.tag&&(t=n.tag),n.is){const{is:e}=n;return o?T.document.createElementNS(o,t,{is:e}):T.document.createElement(t,{is:e})}return o?T.document.createElementNS(o,t):T.document.createElement(t)}})(e,t,n,r,a);return o&&Object.defineProperty(s,o,{value:c,enumerable:!0}),c},J=(e,t)=>{const n=e[t];return void 0===n?"":n},X=(e,t,n)=>{if(s.isArray(t)){const[r,...o]=t;if(!r){const{dataNode:t,handlerNode:r,_key:s}=x(e,{bind:o[0]}),a=()=>n(J(t,s));return r.push(a),a}const s=new Array(r.length+o.length),a=[];for(let e in r)s[2*e]=r[e];const c=()=>{for(let e of a)e();return n("".concat(...s))};return a.push(...o.map(((t,n)=>{const{dataNode:r,handlerNode:o,_key:a}=x(e,{bind:t});return o.push(c),n=2*n+1,()=>{s[n]=J(r,a)}}))),c}return()=>t},z=(e,t,n,{l:r,s:o,i:s,p:a,h:c,a:i,c:l,t:u,u:d,e:p,o:f,k:h})=>{const m=e=>!(!!c!=!!e.shiftKey||!!i!=!!e.altKey||!!l!=!!e.ctrlKey||!!u!=!!e.metaKey||h&&-1===h.indexOf(e.which)),b=e=>{o&&e.stopPropagation(),s&&e.stopImmediatePropagation()};let y={capture:!!d},_=e=>{b(e),a&&!p&&e.preventDefault(),n(e)},v=e=>{m(e)&&_(e)};if(p||f){const o=()=>{_=e=>{b(e),setTimeout((()=>n(e)),0)},v=e=>{m(e)&&_(e)}},s=()=>{const n=t?"$off":"removeEventListener";v=t=>{m(t)&&(e[n](r,v,y),_(t))}};T.passiveSupported||T.onceSupported?(0===p&&T.passiveSupported?y.passive=!1:p&&(T.passiveSupported?y.passive=!0:o()),f&&(T.onceSupported?y.once=!0:s())):(p&&o(),f&&s())}e[t?"$on":"addEventListener"](r,v,y)},H=(e,t,n,r,o)=>{if(G(n)){if(o)return void(t[r]=""===n||n);if("is"===r)return;if(K(r)){const[o]=V(r);if("xmlns"!==o){const s=e.localNamespaces[o]||U(o);return t.setAttributeNS(s,r,n)}}return t.setAttribute(r,n)}const s=((e,{element:t,key:n,custom:r})=>{if(r)return e=>{t[n]=e};if("class"===n)return e=>{if(!(e=`${e}`.replace(/\s+/g," ").trim()))return t.removeAttribute(n);t.setAttribute(n,e)};if(K(n)){const[r]=V(n),o=e.localNamespaces[r]||U(r);return e=>{if(""===e)return t.removeAttributeNS(o,n);t.setAttributeNS(o,n,e)}}return e=>{if(""===e)return t.removeAttribute(n);t.setAttribute(n,e)}})(e,{element:t,key:r,custom:o});X(e,n,s)},Q=(e,t,n,r,o,a,c)=>{const i=s.copy(r),l=i.pop();c&&i.unshift("$data");const u=((e,t)=>{for(let n of e)t[n]||(t[n]={}),t=t[n];return t})(i,t);if(G(n))u[l]=n;else{const i={locked:!1};let d=null;d=a?()=>{i.locked=!1}:e=>{i.locked||u[l]===e||(u[l]=e),i.locked=!1},X(e,n,d),!o&&(1!==r.length||"value"!==l&&"checked"!==l||n[0])||((e,t,n,r,o,a,c,i)=>{const l=i?"$on":"addEventListener",{parentNode:u,_key:d}=x(e,{bind:c}),p=()=>{n.locked=!0,h(),u[d]=o[a],m(),n.locked=!1},f={capture:!0};if(t)z(r,i,p,t);else if("value"===a)r[l]("input",p,f),r[l]("keyup",p,f),r[l]("change",p,f);else{const e=i?"$dispatch":"dispatchEvent";r[l]("change",(()=>{if(r[e](L("__ef_change_event__"),{bubbles:!1,cancelable:!1}),"INPUT"===r.tagName&&"radio"===r.type&&""!==r.name){const e=T.document.querySelectorAll(`input[name=${r.name}][type=radio]`);if(e){const t=s.copy(e);s.remove(t,r);for(let e of t)e.dispatchEvent(L("__ef_change_event__"))}}}),f),r[l]("__ef_change_event__",p)}})(e,o,i,t,u,l,n[1],c)}},Y=e=>e,ee=(e,t,n,r)=>{const{m:o,v:s}=n,a=X(e,s,Y);z(t,r,(t=>{const n=a();e.methods[o]?e.methods[o]({e:t,event:t,value:n,state:e.state}):o&&(t.data=n,e.state.$emit(o,t))}),n)},te={empty(){h();for(let e of s.copy(this))e.$destroy();m(),s.empty(this)},clear(){h();for(let e of s.copy(this))e.$umount();m(),s.empty(this)},pop(){if(0===this.length)return;const e=s.pop(this);return e.$umount(),e},push({ctx:e,key:t,aftAnchor:n},...r){if(!r.length)return;if(r=r.map(O.toEFComponent),h(),1===r.length){const o=r[0].$mount({parent:e.state,key:t});T.before(n,o)}else F(((o,s)=>{T.append(o,...r.map((n=>n.$mount({parent:e.state,key:t})))),I(((e,t)=>{T.before(n,e),f((()=>{T.after(e,o),t(),s()}))}))}));const o=s.push(this,...r);return m(),o},remove(e){if(-1!==this.indexOf(e))return e.$umount(),e},reverse({ctx:e,key:t,anchor:n}){if(0===this.length)return this;const r=s.copy(this),o=[];h(),f((()=>T.after(n,...s.reverse(o))));for(let n of r)n.$umount(),s.push(o,n.$mount({parent:e.state,key:t}));return s.push(this,...s.reverse(r)),m(),this},shift(){if(0===this.length)return;const e=s.shift(this);return e.$umount(),e},sort({ctx:e,key:t,anchor:n},r){if(0===this.length)return this;const o=s.copy(s.sort(this,r)),a=[];h(),f((()=>T.after(n,...a)));for(let n of o)n.$umount(),s.push(a,n.$mount({parent:e.state,key:t}));return s.push(this,...o),m(),this},splice({ctx:e,key:t,anchor:n},...r){if(0===this.length)return this;const[o,,...a]=r;r.length>2&&(r.length=2);const c=s.splice(this,...r);let i=o;i<0&&(i=this.length+o),i<0&&(i=0),h();for(let e of c)e.$umount();if(a.length)if(1===a.length){const r=O.toEFComponent(a[0]);r.$mount({parent:e.state,key:t});const o=r.$ctx.nodeInfo.placeholder;this[i]?T.before(this[i].$ctx.nodeInfo.firstElement,o):T.after(n,o),s.splice(this,i,0,r)}else I(((r,o)=>{this[i]?T.before(this[i].$ctx.nodeInfo.firstElement,r):T.after(n,r),F(((n,c)=>{const l=a.map((e=>O.toEFComponent(e)));T.append(n,...l.map((n=>n.$mount({parent:e.state,key:t})))),s.splice(this,i,0,...l),f((()=>{T.before(r,n),T.remove(r),o(),c()}))}))}));return m(),c},unshift({ctx:e,key:t,anchor:n},...r){if(0===this.length)return this.push(...r).length;r=r.map(O.toEFComponent);const o=[];h(),f((()=>T.after(n,...o)));for(let n of r)s.push(o,n.$mount({parent:e.state,key:t}));const a=s.unshift(this,...r);return m(),a}},ne=(e,t)=>(Object.defineProperties(e,{empty:{value:te.empty},clear:{value:te.clear},pop:{value:te.pop},push:{value:te.push.bind(e,t)},remove:{value:te.remove},reverse:{value:te.reverse.bind(e,t)},shift:{value:te.shift},sort:{value:te.sort.bind(e,t)},splice:{value:te.splice.bind(e,t)},unshift:{value:te.unshift.bind(e,t)}}),e),re=e=>s.isArray(e)?"array":typeof e,oe=U("svg"),se=U("math"),ae=U("html"),ce=Object.create(null),ie=[(e,t,n)=>{const{children:r}=e,o=r[t],{anchor:s,node:a}=o;a!==n&&(n=O.toEFComponent(n),h(),a&&(n===ce?n=null:a.$umount()),o.node=n,n&&n.$mount({target:s,parent:e.state,option:w.AFTER,key:t}),m())},(e,t,n)=>{const{children:r}=e,{anchor:o,node:a}=r[t];s.equals(a,n)||(h(),a.length&&a.clear(),n&&(n=s.copy(n),F(((r,c)=>{for(let o of n)T.append(r,O.toEFComponent(o).$mount({parent:e.state,key:t}));s.push(a,...n),f((()=>{T.after(o,r),c()}))}))),m())}],le=(e,t,n)=>{const r=ie[e];Object.defineProperty(n.prototype,t,{get(){return this.$ctx.children[t].node},set(e){const n=this.$ctx;r(n,t,e)},enumerable:!0})},ue=(e,{apply:t,node:n,nodeType:r,namespace:o,create:s})=>{if(T.isNodeInstance(n))t(n);else switch(r){case"string":t(T.document.createTextNode(n));break;case"array":"object"===re(n[0])?t(s(e,{node:n,namespace:o})):((e,t,n)=>{const r=T.document.createTextNode(""),{dataNode:o,handlerNode:s,_key:a}=x(e,{bind:t});s.push((()=>{const e=o[a];r.textContent=void 0!==e?e:""})),n(r)})(e,n,t);break;case"object":{0;const r=T.document.createTextNode("");if(t(r),0===n.t)((e,t,n)=>{const{children:r}=e,o={anchor:n};r[t]=o,n[A]=o})(e,n.n,r);else{const o=T.document.createTextNode("");t(o),((e,t,n,r)=>{const{children:o}=e;o[t]={node:ne([],{ctx:e,key:t,anchor:n,aftAnchor:r}),anchor:n,aftAnchor:r},n[A]=o[t]})(e,n.n,r,o)}0;break}}},de=(e,{node:t,namespace:n})=>{const[r,...o]=t,s=n;let a=r.t,c=!1;const i=e.scope[a],l=0===a,u=Object.isPrototypeOf.call(O.EFBaseComponent,i||a);if(!l&&!u)if(i&&("string"==typeof i?a=i:i.tag&&(a=i.tag,i.namespaceURI&&(n=i.namespaceURI))),K(a)){const[t,r]=V(a),o=e.localNamespaces[t];o?(n=o,c=!0):n=U(t),a=r}else if(r.a&&r.a.xmlns&&G(r.a.xmlns))n=r.a.xmlns;else if(!n)switch(a=a.toLowerCase(),a){case"svg":n=oe;break;case"math":n=se}n===ae&&(n="");const[d,p]=((e,t,n,r,o)=>{if(r)return[new j,"fragment"];const{t:s,a,p:c,e:i,r:l}=t,u=s,d=e.scope[s]||s,p=typeof d,f=W(p,u,d,a,l,e.refs,n);if(a)for(let t in a)H(e,f,a[t],t,o);if(c)for(let[t,n,r,s]of c)Q(e,f,n,t,r,s,o);if(i)for(let t of i)ee(e,f,t,o);return[f,p]})(e,r,n,l,u);let f=$;switch(p){case"string":case"object":f=(...e)=>{T.append(d,...e)};break;case"function":{const{children:e}=d.$ctx;if(e.children){const t=e.children.anchor;t&&(f=(...e)=>{T.before(t,...e)})}else Array.isArray(d.children)&&(f=(...e)=>{d.children.push(...e)});break}case"fragment":f=(...e)=>{d.append(...e)}}n&&n===oe&&Z(a)&&(n=""),c&&(n=s);for(let t of o)ue(e,{apply:f,node:t,nodeType:re(t),namespace:n,create:de});return d},pe=({base:e,key:t},{checkTrue:n,get:r,set:o})=>{if(r){if(!o)throw new Error("[EF] Setter must be defined when getter exists");return r}return n?function(){return n(e(this)[t],this)}:function(){return e(this)[t]}},fe=({base:e,key:t},{checkTrue:n,trueVal:r,falseVal:o,get:s,set:a})=>{if(a){if(!s)throw new Error("[EF] Getter must be defined when setter exists");return a}return n?function(n){const s=e(this),a=r,c=o;"function"!=typeof r&&(r=()=>a),"function"!=typeof o&&(o=()=>c),s[t]=n?r(this):o(this)}:function(n){e(this)[t]=n}},he=e=>e.$data,me=e=>e?"function"==typeof e?e:("string"==typeof e&&(e=e.split(".")),t=>{for(let n of e)t=t[n];return t}):he,be=(e,t)=>{for(let n in t){const r=t[n],o={base:me(r.base),key:r.key||n},s=pe(o,r),a=fe(o,r);Object.defineProperty(e.prototype,n,{get:s,set:a,enumerable:!0,configurable:!1})}return e},ye=class{static initData(){}static initMethods(){}static initScope(){}static __defaultScope(){return{}}static init(e,t,n){return{data:this.initData(e,t,n),methods:this.initMethods(e,t,n),scope:this.initScope(e,t,n)}}constructor(e,t={}){const n=this.constructor;const r={},o=0===e[0].t;let a=null,c=null,i=null;a=T.document.createTextNode(""),c=T.textNodeSupportsEvent?a:document.createElement("i");const l={placeholder:a,eventBus:c,parent:null,key:null},u=()=>{const e=a.parentNode;u.remove||!e?(T.remove(i),u.remove=!1):e&&(T.before(a,i),T.remove(a))},d={ast:e,mount:u,refs:{},data:r,handlers:{},subscribers:{},nodeInfo:l,children:{},state:this,isFragment:o,localNamespaces:n.__local_namespaces,self:this,constructor:n};Object.defineProperty(this,"$ctx",{value:d,enumerable:!1,configurable:!0});const p=[],{data:f,methods:h,scope:m,beforeMount:b,afterMount:_,beforeUmount:v,afterUmount:g,beforeDestroy:$,afterDestroy:N,onCreated:x}=n.init(this,r,((e,t)=>{const n=[e,t];return p.push(n),()=>{i?this.$unsubscribe(e,t):s.remove(n)}}));y(d,{innerData:f||{},methods:h||{},scope:y(n.__defaultScope(),m,t),beforeMount:b,afterMount:_,beforeUmount:v,afterUmount:g,beforeDestroy:$,afterDestroy:N}),i=de(d,{node:e,namespace:""});let k=i;for(;!T.isNodeInstance(k);)k=E(k,j)?k.firstElement:k.$ctx.nodeInfo.element;l.element=i,l.firstElement=k;for(let[e,t]of p)this.$subscribe(e,t);x&&x()}get $data(){return this.$ctx.data}set $data(e){h(),y(this.$ctx.data,e),m()}get $methods(){return this.$ctx.methods}set $methods(e){this.$ctx.methods=e}get $refs(){return this.$ctx.refs}$mount({target:e,option:t,parent:n,key:r}){const{nodeInfo:o,mount:s,beforeMount:a,afterMount:c}=this.$ctx;let i=null;if("string"==typeof e&&!(e=document.querySelector(e)))throw new Error("Mount target not found!");a&&a(),h(),o.parent&&this.$umount(),n||(n=e),r||(r="__DIRECTMOUNT__"),o.parent=n,o.key=r,s.remove=!1,f(s);const l=o.placeholder;if(e){switch(t){case w.BEFORE:T.before(e,l);break;case w.AFTER:T.after(e,l);break;case w.REPLACE:T.before(e,l),T.remove(e);break;default:T.append(e,l)}i=m()}else m(),i=l;return c&&c(),i}$umount(){const{nodeInfo:e,mount:t,beforeUmount:n,afterUmount:r}=this.$ctx,{parent:o,key:a}=e;e.parent=null,e.key=null,n&&n(),h(),o&&("__DIRECTMOUNT__"!==a?o[a]&&(s.isArray(o[a])?s.remove(o[a],this):o[a]=ce):E(o,j)&&o.$ctx.nodeInfo.element.removeChild(e.element)),t.remove=!0,f(t);const c=m();return r&&r(),c}$subscribe(e,t){const n=this.$ctx,r=e.split("."),{dataNode:o,subscriberNode:s,_key:a}=x(n,{bind:[r]});h();try{t({state:this,value:o[a]}),s.push(t)}catch(e){N.error("Error caught when registering subscriber:\n",e)}m()}$unsubscribe(e,t){const{subscribers:n}=this.$ctx;((e,t,n)=>{const r=((e,t)=>{const n=e.split("."),r=n.pop();for(let e of n)t[e]||(t[e]={}),t=t[e];return t[r]})(e,n);s.remove(r,t)})(e,t,n)}$update(e){h(),b(this,e),m()}$call(e,t={},...n){return this.$methods[e](y({},t,{state:this}),...n)}$dispatch(e){return this.$ctx.nodeInfo.eventBus.dispatchEvent(e)}$emit(e,t){return this.$dispatch(L(e,t))}$on(e,t,n={}){return this.$ctx.nodeInfo.eventBus.addEventListener(e,t,n),()=>this.$off(e,t,n)}$off(e,t,n){return this.$ctx.nodeInfo.eventBus.removeEventListener(e,t,n)}$destroy(){const{children:e,beforeDestroy:t,afterDestroy:n}=this.$ctx;t&&t(),h(),this.$umount();for(let t in e)e[t].anchor[A]=null;for(let e in this)"array"===re(this[e])?this[e].clear():this[e]=null;delete this.$ctx;const r=m();return n&&n(),r}},_e=[{t:0}],ve=class extends ye{constructor(...e){super(_e);this.$ctx.nodeInfo.element.append(...e),this.$ctx.elements=e}get $el(){return this.$ctx.elements}},ge=[{t:0},[["t"]]],$e=class extends ye{constructor(e){h(),super(ge),this.text=e,m()}};be($e,{text:{key:"t"}});O.EFBaseComponent=ye,O.EFNodeWrapper=ve,O.toEFComponent=e=>null==e||e instanceof ye?e:e!==ce?T.isNodeInstance(e)?new ve(e):new $e("string"==typeof e?e:JSON.stringify(e)):void 0;const Ne=(e,t)=>{const n=re(t);switch(n){case"array":{const[n,...r]=t;if("object"===re(n)){e.__used_tags[n.t]=!0,n.a&&((e,t)=>{for(let n in e)if(0===n.indexOf("xmlns:")){const[,r]=n.split(":");t.__local_namespaces[r]=e[n]}})(n.a,e);for(let t of r)Ne(e,t)}break}case"object":if(t.t>1)throw new TypeError(`[EF] Not a standard ef.js AST: Unknown mount point type '${t.t}'`);le(t.t,t.n,e);break;case"string":break;default:throw new TypeError(`[EF] Not a standard ef.js AST: Unknown node type '${n}'`)}},xe=(e,t)=>{const n=class extends ye{constructor(t,n){h(),super(e,n),t&&this.$update(t),m()}};return t&&Object.defineProperty(n,"name",{value:t}),Object.defineProperty(n.prototype,"constructor",{enumerable:!1}),Object.defineProperty(n,"__local_namespaces",{enumerable:!1,value:{}}),Object.defineProperty(n,"__used_tags",{enumerable:!1,value:{}}),Object.defineProperty(n,"__component_ast",{enumerable:!1,value:e}),Ne(n,e),n}}}]);