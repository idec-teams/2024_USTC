(()=>{"use strict";const e=Array,t=e.prototype,n={copy:e=>t.slice.call(e,0),empty:e=>(e.length=0,e),equals(t,n){if(!e.isArray(n))return!1;if(t===n)return!0;if(t.length!==n.length)return!1;for(let e=0,r=t.length;e<r;e++)if(t[e]!==n[e])return!1;return!0},pop:e=>t.pop.call(e),push:(e,...n)=>t.push.apply(e,n),remove(e,n){const r=t.indexOf.call(e,n);if(r>-1)return t.splice.call(e,r,1),n},reverse:e=>t.reverse.call(e),shift:e=>t.shift.call(e),slice:(e,n,r)=>t.slice.call(e,n,r),sort:(e,n)=>t.sort.call(e,n),splice:(e,...n)=>t.splice.call(e,...n),unshift:(e,...n)=>t.unshift.apply(e,n),isArray:t=>e.isArray(t)},r=[];let o=0;const s={first:null,last:null},a={first:null,last:null},i=(e,t)=>{t!==e.last&&(t.__next&&(t.__next.__prev=t.__prev),t.__prev&&(t.__prev.__next=t.__next),e.first?t===e.first&&(e.first=t.__next):e.first=t,e.last&&(e.last.__next=t,t.__prev=e.last),e.last=t,e.first.__prev=null,e.last.__next=null)},c=e=>{let t=e.first;if(!t)return;const n=[];for(;t;){const e=t.__next;t.__prev=null,t.__next=null,n.push(t),t=e}e.first=null,e.last=null;for(let e of n)e()},l=(...e)=>{for(let t of e)i(s,t)},u=e=>{i(a,e)},d=()=>(o+=1,o),p=e=>{if(!e&&(o-=1)>0)return o;for(o=1;s.first;)c(s);for(;a.first;)c(a);if(o=0,r.length){const e=n.copy(r);n.empty(r),setTimeout((()=>{for(let t of e)t()}),0)}return o},f=(e,...t)=>{for(let n of t)for(let t in n)e[t]=n[t];return e},h=Object.assign||f,m=(e,t)=>e[t]||((e,t)=>{const n={};return Object.defineProperty(t,e,{get:()=>n,set(e){d(),h(n,e),p()},configurable:!1,enumerable:!0}),n})(t,e),b=e=>e!=e,y=()=>{},v=(()=>{if("undefined"==typeof console){if("undefined"==typeof print)return{log:y,info:y,warn:y,error:y};const e=(e,t)=>`[EF][${e}] ${t.join(" ")}`;return{log:(...t)=>print(e("LOG ",t)),info:(...t)=>print(e("INFO",t)),warn:(...t)=>print(e("WARN",t)),error:(...t)=>print(e("ERROR",t))}}const e="[EF] %s";return{log:console.log&&console.log.bind(console,e)||y,info:console.info&&console.info.bind(console,e)||y,warn:console.warn&&console.warn.bind(console,e)||y,error:console.error&&console.error.bind(console,e)||y}})(),_=(e,{bind:t})=>{const r=n.copy(t[0]),o=r.pop(),{data:s,handlers:a,subscribers:i,innerData:c}=e,{parentNode:u,handlerNode:f,subscriberNode:h,dataNode:y}=(({_path:e,_key:t,data:n,handlers:r,subscribers:o,innerData:s})=>{const a=((e,t)=>e.reduce(m,t))(e,n),{handlerNode:i,subscriberNode:c,dataNode:l}=(({_path:e,handlers:t,subscribers:n,innerData:r})=>{for(let o of e)t[o]||(t[o]={}),n[o]||(n[o]={}),r[o]||(r[o]={}),t=t[o],n=n[o],r=r[o];return{handlerNode:t,subscriberNode:n,dataNode:r}})({_path:e,handlers:r,subscribers:o,innerData:s});let u=i[t],d=c[t];return d||(u=i[t]=[],d=c[t]=[]),Object.prototype.hasOwnProperty.call(l,t)||(l[t]=a[t]),{parentNode:a,handlerNode:u,subscriberNode:d,dataNode:l}})({_path:r,_key:o,data:s,handlers:a,subscribers:i,innerData:c}),_=Object.getOwnPropertyDescriptor(u,o);return _&&(_.get||_.set)||((e,{parentNode:t,dataNode:n,handlerNode:r,subscriberNode:o,_key:s})=>{const{state:a}=e,i=()=>l(...r);let c=!1;Object.defineProperty(t,s,{get:()=>n[s],set(e){const t=n[s];if(!(c||t===e||b(t)&&b(e))){if(c=!0,n[s]=e,d(),l(i),o.length>0)try{for(const n of o)n({state:a,value:e,oldValue:t})}catch(e){v.error("Error caught when executing subscribers:\n",e)}p(),c=!1}},enumerable:!0}),l(i)})(e,{parentNode:u,dataNode:y,handlerNode:f,subscriberNode:h,_key:o}),t.length>1&&void 0===y[o]&&(u[o]=t[1]),{dataNode:y,parentNode:u,handlerNode:f,subscriberNode:h,_key:o}},g=(e,t)=>e.constructor===t,$="undefined"!=typeof document&&"undefined"!=typeof Node,N="before",x="after",E="replace",k={},w="__ef_mount_point__",I={},O=[],S=[],T=e=>{const t=O.pop()||I.document.createDocumentFragment();return e(t,(()=>{O.push(t)}))},A=e=>{const t=S.pop()||I.document.createTextNode("");return e(t,(()=>{S.push(t)}))},C=class{constructor(){this.$children=[],this.$safeZone=I.document.createDocumentFragment()}append(...e){I.append(this.$safeZone,...e),n.push(this.$children,...e)}appendTo(e){I.append(e,...this.$children)}addBefore(e){I.before(e,...this.$children)}removeChild(e){I.remove(e),n.remove(this.$children,e)}remove(){I.append(this.$safeZone,...this.$children)}get firstElement(){return this.$children[0]||null}},j=(e,t)=>{const{element:n,placeholder:r}=e.$ctx.nodeInfo;I.append(t,n,r)},F=(e,t)=>{const{element:n,placeholder:r}=e.$ctx.nodeInfo;I.before(t,n,r)},D=(e,t,r)=>{if(3!==e.nodeType)return;const o=e[w];if(!o)return;const{node:s}=o;if(s){if(d(),r)if(n.isArray(s))for(let e of s)F(e,r);else F(s,r);else if(n.isArray(s))for(let e of s)j(e,t);else j(s,t);p()}},P=(e,t)=>{d();for(let n of t)I.isNodeInstance(n)?(e.appendChild(n),D(n,e)):g(n,C)?n.appendTo(e):n instanceof k.EFBaseComponent&&n.$mount({target:e});p()};I.isNodeInstance=e=>I.isNode?I.isNode(e):!(!e||!e.nodeType),I.before=(e,...t)=>{const n=e.parentNode,r=t[0];1!==t.length||!I.isNodeInstance(r)||3===r.nodeType&&r[w]?11===n.nodeType?((e,t)=>{const n=e.parentNode;d();for(let r of t)I.isNodeInstance(r)?(n.insertBefore(r,e),D(r,n,e)):g(r,C)?r.addBefore(e):r instanceof k.EFBaseComponent&&r.$mount({target:e,option:N});p()})(e,t):T(((r,o)=>{d(),P(r,t),A(((t,s)=>{n.insertBefore(t,e),u((()=>{n.insertBefore(r,t),n.removeChild(t),s(),o()}))})),p()})):n.insertBefore(t[0],e)},I.after=(e,...t)=>e.nextSibling?I.before(e.nextSibling,...t):I.append(e.parentNode,...t),I.append=(e,...t)=>{if(!I.isNodeInstance(e))return e instanceof k.EFBaseComponent?n.isArray(e.children)?void e.children.push(...t):void 0:void e.append(...t);1===t.length&&I.isNodeInstance(t[0])?(e.appendChild(t[0]),D(t[0],e)):11===e.nodeType?P(e,t):1!==e.nodeType&&9!==e.nodeType||T(((n,r)=>{d(),P(n,t),A(((t,o)=>{e.appendChild(t),u((()=>{e.insertBefore(n,t),e.removeChild(t),o(),r()}))})),p()}))},I.remove=e=>{I.isNodeInstance(e)?e.parentNode&&e.parentNode.removeChild(e):e instanceof k.EFBaseComponent?e.$umount():g(e,C)&&e.remove()},$&&(e=>{h(I,e);const t=I.document.createTextNode("");I.textNodeSupportsEvent=!!t.addEventListener,I.passiveSupported=!1,I.onceSupported=!1;try{const e=Object.create({},{passive:{get:()=>(I.passiveSupported=!0,I.passiveSupported)},once:{get:()=>(I.onceSupported=!0,I.onceSupported)}});I.document.addEventListener("__ef_event_option_test__",y,e),I.document.removeEventListener("__ef_event_option_test__",y,e)}catch(e){}})({document,Node});const B=(e,t={})=>{const n=I.document.createEvent&&I.document.createEvent("CustomEvent")||new Event(e,t);return n.initEvent&&n.initEvent(e,t.bubbles,t.cancelable,t),n},M={xml:"http://www.w3.org/XML/1998/namespace",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink"},L=e=>{if(M[e])return M[e];throw new Error(`[EF] Namespace "${e}" has not been declared.`)},U=e=>{const t={};return n=>t[n]||(t[n]=e(n))},R=U((e=>e.indexOf(":")>=0)),q=U((e=>e.split(":"))),K=U((e=>["foreignobject","desc","title"].indexOf(e.toLowerCase())>-1)),V=e=>["number","boolean","string"].indexOf(typeof e)>-1,Z=(e,t)=>{const n=e[t];return void 0===n?"":n},G=(e,t,r)=>{if(n.isArray(t)){const[n,...o]=t;if(!n){const{dataNode:t,handlerNode:n,_key:s}=_(e,{bind:o[0]}),a=()=>r(Z(t,s));return n.push(a),a}const s=new Array(n.length+o.length),a=[];for(let e in n)s[2*e]=n[e];const i=()=>{for(let e of a)e();return r("".concat(...s))};return a.push(...o.map(((t,n)=>{const{dataNode:r,handlerNode:o,_key:a}=_(e,{bind:t});return o.push(i),n=2*n+1,()=>{s[n]=Z(r,a)}}))),i}return()=>t},W=(e,t,n,{l:r,s:o,i:s,p:a,h:i,a:c,c:l,t:u,u:d,e:p,o:f,k:h})=>{const m=e=>!(!!i!=!!e.shiftKey||!!c!=!!e.altKey||!!l!=!!e.ctrlKey||!!u!=!!e.metaKey||h&&-1===h.indexOf(e.which)),b=e=>{o&&e.stopPropagation(),s&&e.stopImmediatePropagation()};let y={capture:!!d},v=e=>{b(e),a&&!p&&e.preventDefault(),n(e)},_=e=>{m(e)&&v(e)};if(p||f){const o=()=>{v=e=>{b(e),setTimeout((()=>n(e)),0)},_=e=>{m(e)&&v(e)}},s=()=>{const n=t?"$off":"removeEventListener";_=t=>{m(t)&&(e[n](r,_,y),v(t))}};I.passiveSupported||I.onceSupported?(0===p&&I.passiveSupported?y.passive=!1:p&&(I.passiveSupported?y.passive=!0:o()),f&&(I.onceSupported?y.once=!0:s())):(p&&o(),f&&s())}e[t?"$on":"addEventListener"](r,_,y)},J=(e,t,n,r,o)=>{if(V(n)){if(o)return void(t[r]=""===n||n);if("is"===r)return;if(R(r)){const[o]=q(r);if("xmlns"!==o){const s=e.localNamespaces[o]||L(o);return t.setAttributeNS(s,r,n)}}return t.setAttribute(r,n)}const s=((e,{element:t,key:n,custom:r})=>{if(r)return e=>{t[n]=e};if("class"===n)return e=>{if(!(e=`${e}`.replace(/\s+/g," ").trim()))return t.removeAttribute(n);t.setAttribute(n,e)};if(R(n)){const[r]=q(n),o=e.localNamespaces[r]||L(r);return e=>{if(""===e)return t.removeAttributeNS(o,n);t.setAttributeNS(o,n,e)}}return e=>{if(""===e)return t.removeAttribute(n);t.setAttribute(n,e)}})(e,{element:t,key:r,custom:o});G(e,n,s)},X=(e,t,r,o,s,a,i)=>{const c=n.copy(o),l=c.pop();i&&c.unshift("$data");const u=((e,t)=>{for(let n of e)t[n]||(t[n]={}),t=t[n];return t})(c,t);if(V(r))u[l]=r;else{const c={locked:!1};let f=null;f=a?()=>{c.locked=!1}:e=>{c.locked||u[l]===e||(u[l]=e),c.locked=!1},G(e,r,f),!s&&(1!==o.length||"value"!==l&&"checked"!==l||r[0])||((e,t,r,o,s,a,i,c)=>{const l=c?"$on":"addEventListener",{parentNode:u,_key:f}=_(e,{bind:i}),h=()=>{r.locked=!0,d(),u[f]=s[a],p(),r.locked=!1},m={capture:!0};if(t)W(o,c,h,t);else if("value"===a)o[l]("input",h,m),o[l]("keyup",h,m),o[l]("change",h,m);else{const e=c?"$dispatch":"dispatchEvent";o[l]("change",(()=>{if(o[e](B("__ef_change_event__"),{bubbles:!1,cancelable:!1}),"INPUT"===o.tagName&&"radio"===o.type&&""!==o.name){const e=I.document.querySelectorAll(`input[name=${o.name}][type=radio]`);if(e){const t=n.copy(e);n.remove(t,o);for(let e of t)e.dispatchEvent(B("__ef_change_event__"))}}}),m),o[l]("__ef_change_event__",h)}})(e,s,c,t,u,l,r[1],i)}},z=e=>e,H=(e,t,n,r)=>{const{m:o,v:s}=n,a=G(e,s,z);W(t,r,(t=>{const n=a();e.methods[o]?e.methods[o]({e:t,event:t,value:n,state:e.state}):o&&(t.data=n,e.state.$emit(o,t))}),n)},Q={empty(){d();for(let e of n.copy(this))e.$destroy();p(),n.empty(this)},clear(){d();for(let e of n.copy(this))e.$umount();p(),n.empty(this)},pop(){if(0===this.length)return;const e=n.pop(this);return e.$umount(),e},push({ctx:e,key:t,aftAnchor:r},...o){if(!o.length)return;if(o=o.map(k.toEFComponent),d(),1===o.length){const n=o[0].$mount({parent:e.state,key:t});I.before(r,n)}else T(((n,s)=>{I.append(n,...o.map((n=>n.$mount({parent:e.state,key:t})))),A(((e,t)=>{I.before(r,e),u((()=>{I.after(e,n),t(),s()}))}))}));const s=n.push(this,...o);return p(),s},remove(e){if(-1!==this.indexOf(e))return e.$umount(),e},reverse({ctx:e,key:t,anchor:r}){if(0===this.length)return this;const o=n.copy(this),s=[];d(),u((()=>I.after(r,...n.reverse(s))));for(let r of o)r.$umount(),n.push(s,r.$mount({parent:e.state,key:t}));return n.push(this,...n.reverse(o)),p(),this},shift(){if(0===this.length)return;const e=n.shift(this);return e.$umount(),e},sort({ctx:e,key:t,anchor:r},o){if(0===this.length)return this;const s=n.copy(n.sort(this,o)),a=[];d(),u((()=>I.after(r,...a)));for(let r of s)r.$umount(),n.push(a,r.$mount({parent:e.state,key:t}));return n.push(this,...s),p(),this},splice({ctx:e,key:t,anchor:r},...o){if(0===this.length)return this;const[s,,...a]=o;o.length>2&&(o.length=2);const i=n.splice(this,...o);let c=s;c<0&&(c=this.length+s),c<0&&(c=0),d();for(let e of i)e.$umount();if(a.length)if(1===a.length){const o=k.toEFComponent(a[0]);o.$mount({parent:e.state,key:t});const s=o.$ctx.nodeInfo.placeholder;this[c]?I.before(this[c].$ctx.nodeInfo.firstElement,s):I.after(r,s),n.splice(this,c,0,o)}else A(((o,s)=>{this[c]?I.before(this[c].$ctx.nodeInfo.firstElement,o):I.after(r,o),T(((r,i)=>{const l=a.map((e=>k.toEFComponent(e)));I.append(r,...l.map((n=>n.$mount({parent:e.state,key:t})))),n.splice(this,c,0,...l),u((()=>{I.before(o,r),I.remove(o),s(),i()}))}))}));return p(),i},unshift({ctx:e,key:t,anchor:r},...o){if(0===this.length)return this.push(...o).length;o=o.map(k.toEFComponent);const s=[];d(),u((()=>I.after(r,...s)));for(let r of o)n.push(s,r.$mount({parent:e.state,key:t}));const a=n.unshift(this,...o);return p(),a}},Y=e=>n.isArray(e)?"array":typeof e,ee=L("svg"),te=L("math"),ne=L("html"),re=Object.create(null),oe=[(e,t,n)=>{const{children:r}=e,o=r[t],{anchor:s,node:a}=o;a!==n&&(n=k.toEFComponent(n),d(),a&&(n===re?n=null:a.$umount()),o.node=n,n&&n.$mount({target:s,parent:e.state,option:x,key:t}),p())},(e,t,r)=>{const{children:o}=e,{anchor:s,node:a}=o[t];n.equals(a,r)||(d(),a.length&&a.clear(),r&&(r=n.copy(r),T(((o,i)=>{for(let n of r)I.append(o,k.toEFComponent(n).$mount({parent:e.state,key:t}));n.push(a,...r),u((()=>{I.after(s,o),i()}))}))),p())}],se=(e,t,n)=>{const r=oe[e];Object.defineProperty(n.prototype,t,{get(){return this.$ctx.children[t].node},set(e){const n=this.$ctx;r(n,t,e)},enumerable:!0})},ae=(e,{apply:t,node:n,nodeType:r,namespace:o,create:s})=>{if(I.isNodeInstance(n))t(n);else switch(r){case"string":t(I.document.createTextNode(n));break;case"array":"object"===Y(n[0])?t(s(e,{node:n,namespace:o})):((e,t,n)=>{const r=I.document.createTextNode(""),{dataNode:o,handlerNode:s,_key:a}=_(e,{bind:t});s.push((()=>{const e=o[a];r.textContent=void 0!==e?e:""})),n(r)})(e,n,t);break;case"object":{const r=I.document.createTextNode("");if(t(r),0===n.t)((e,t,n)=>{const{children:r}=e,o={anchor:n};r[t]=o,n[w]=o})(e,n.n,r);else{const o=I.document.createTextNode("");t(o),((e,t,n,r)=>{const{children:o}=e;var s,a;o[t]={node:(s=[],a={ctx:e,key:t,anchor:n,aftAnchor:r},Object.defineProperties(s,{empty:{value:Q.empty},clear:{value:Q.clear},pop:{value:Q.pop},push:{value:Q.push.bind(s,a)},remove:{value:Q.remove},reverse:{value:Q.reverse.bind(s,a)},shift:{value:Q.shift},sort:{value:Q.sort.bind(s,a)},splice:{value:Q.splice.bind(s,a)},unshift:{value:Q.unshift.bind(s,a)}}),s),anchor:n,aftAnchor:r},n[w]=o[t]})(e,n.n,r,o)}break}}},ie=(e,{node:t,namespace:n})=>{const[r,...o]=t,s=n;let a=r.t,i=!1;const c=e.scope[a],l=0===a,u=Object.isPrototypeOf.call(k.EFBaseComponent,c||a);if(!l&&!u)if(c&&("string"==typeof c?a=c:c.tag&&(a=c.tag,c.namespaceURI&&(n=c.namespaceURI))),R(a)){const[t,r]=q(a),o=e.localNamespaces[t];o?(n=o,i=!0):n=L(t),a=r}else if(r.a&&r.a.xmlns&&V(r.a.xmlns))n=r.a.xmlns;else if(!n)switch(a=a.toLowerCase(),a){case"svg":n=ee;break;case"math":n=te}n===ne&&(n="");const[d,p]=((e,t,n,r,o)=>{if(r)return[new C,"fragment"];const{t:s,a,p:i,e:c,r:l}=t,u=s,d=e.scope[s]||s,p=typeof d,f=((e,t,n,r,o,s,a)=>{const i=((e,t,n,r,o)=>{switch(e){case"string":if(t===n&&r&&r.is&&"string"==typeof r.is){const{is:e}=r;return o?I.document.createElementNS(o,n,{is:e}):I.document.createElement(n,{is:e})}return o?I.document.createElementNS(o,n):I.document.createElement(n);case"function":return new n;default:if(n.tag&&(t=n.tag),n.is){const{is:e}=n;return o?I.document.createElementNS(o,t,{is:e}):I.document.createElement(t,{is:e})}return o?I.document.createElementNS(o,t):I.document.createElement(t)}})(e,t,n,r,a);return o&&Object.defineProperty(s,o,{value:i,enumerable:!0}),i})(p,u,d,a,l,e.refs,n);if(a)for(let t in a)J(e,f,a[t],t,o);if(i)for(let[t,n,r,s]of i)X(e,f,n,t,r,s,o);if(c)for(let t of c)H(e,f,t,o);return[f,p]})(e,r,n,l,u);let f=y;switch(p){case"string":case"object":f=(...e)=>{I.append(d,...e)};break;case"function":{const{children:e}=d.$ctx;if(e.children){const t=e.children.anchor;t&&(f=(...e)=>{I.before(t,...e)})}else Array.isArray(d.children)&&(f=(...e)=>{d.children.push(...e)});break}case"fragment":f=(...e)=>{d.append(...e)}}n&&n===ee&&K(a)&&(n=""),i&&(n=s);for(let t of o)ae(e,{apply:f,node:t,nodeType:Y(t),namespace:n,create:ie});return d},ce=({base:e,key:t},{checkTrue:n,get:r,set:o})=>{if(r){if(!o)throw new Error("[EF] Setter must be defined when getter exists");return r}return n?function(){return n(e(this)[t],this)}:function(){return e(this)[t]}},le=({base:e,key:t},{checkTrue:n,trueVal:r,falseVal:o,get:s,set:a})=>{if(a){if(!s)throw new Error("[EF] Getter must be defined when setter exists");return a}return n?function(n){const s=e(this),a=r,i=o;"function"!=typeof r&&(r=()=>a),"function"!=typeof o&&(o=()=>i),s[t]=n?r(this):o(this)}:function(n){e(this)[t]=n}},ue=e=>e.$data,de=e=>e?"function"==typeof e?e:("string"==typeof e&&(e=e.split(".")),t=>{for(let n of e)t=t[n];return t}):ue,pe=class{static initData(){}static initMethods(){}static initScope(){}static __defaultScope(){return{}}static init(e,t,n){return{data:this.initData(e,t,n),methods:this.initMethods(e,t,n),scope:this.initScope(e,t,n)}}constructor(e,t={}){const r=this.constructor,o={},s=0===e[0].t;let a=null,i=null,c=null;a=I.document.createTextNode(""),i=I.textNodeSupportsEvent?a:document.createElement("i");const l={placeholder:a,eventBus:i,parent:null,key:null},u=()=>{const e=a.parentNode;u.remove||!e?(I.remove(c),u.remove=!1):e&&(I.before(a,c),I.remove(a))},d={ast:e,mount:u,refs:{},data:o,handlers:{},subscribers:{},nodeInfo:l,children:{},state:this,isFragment:s,localNamespaces:r.__local_namespaces,self:this,constructor:r};Object.defineProperty(this,"$ctx",{value:d,enumerable:!1,configurable:!0});const p=[],{data:f,methods:m,scope:b,beforeMount:y,afterMount:v,beforeUmount:_,afterUmount:$,beforeDestroy:N,afterDestroy:x,onCreated:E}=r.init(this,o,((e,t)=>{const r=[e,t];return p.push(r),()=>{c?this.$unsubscribe(e,t):n.remove(r)}}));h(d,{innerData:f||{},methods:m||{},scope:h(r.__defaultScope(),b,t),beforeMount:y,afterMount:v,beforeUmount:_,afterUmount:$,beforeDestroy:N,afterDestroy:x}),c=ie(d,{node:e,namespace:""});let k=c;for(;!I.isNodeInstance(k);)k=g(k,C)?k.firstElement:k.$ctx.nodeInfo.element;l.element=c,l.firstElement=k;for(let[e,t]of p)this.$subscribe(e,t);E&&E()}get $data(){return this.$ctx.data}set $data(e){d(),h(this.$ctx.data,e),p()}get $methods(){return this.$ctx.methods}set $methods(e){this.$ctx.methods=e}get $refs(){return this.$ctx.refs}$mount({target:e,option:t,parent:n,key:r}){const{nodeInfo:o,mount:s,beforeMount:a,afterMount:i}=this.$ctx;let c=null;if("string"==typeof e&&!(e=document.querySelector(e)))throw new Error("Mount target not found!");a&&a(),d(),o.parent&&this.$umount(),n||(n=e),r||(r="__DIRECTMOUNT__"),o.parent=n,o.key=r,s.remove=!1,u(s);const l=o.placeholder;if(e){switch(t){case N:I.before(e,l);break;case x:I.after(e,l);break;case E:I.before(e,l),I.remove(e);break;default:I.append(e,l)}c=p()}else p(),c=l;return i&&i(),c}$umount(){const{nodeInfo:e,mount:t,beforeUmount:r,afterUmount:o}=this.$ctx,{parent:s,key:a}=e;e.parent=null,e.key=null,r&&r(),d(),s&&("__DIRECTMOUNT__"!==a?s[a]&&(n.isArray(s[a])?n.remove(s[a],this):s[a]=re):g(s,C)&&s.$ctx.nodeInfo.element.removeChild(e.element)),t.remove=!0,u(t);const i=p();return o&&o(),i}$subscribe(e,t){const n=this.$ctx,r=e.split("."),{dataNode:o,subscriberNode:s,_key:a}=_(n,{bind:[r]});d();try{t({state:this,value:o[a]}),s.push(t)}catch(e){v.error("Error caught when registering subscriber:\n",e)}p()}$unsubscribe(e,t){const{subscribers:r}=this.$ctx;((e,t,r)=>{const o=((e,t)=>{const n=e.split("."),r=n.pop();for(let e of n)t[e]||(t[e]={}),t=t[e];return t[r]})(e,r);n.remove(o,t)})(e,t,r)}$update(e){d(),f(this,e),p()}$call(e,t={},...n){return this.$methods[e](h({},t,{state:this}),...n)}$dispatch(e){return this.$ctx.nodeInfo.eventBus.dispatchEvent(e)}$emit(e,t){return this.$dispatch(B(e,t))}$on(e,t,n={}){return this.$ctx.nodeInfo.eventBus.addEventListener(e,t,n),()=>this.$off(e,t,n)}$off(e,t,n){return this.$ctx.nodeInfo.eventBus.removeEventListener(e,t,n)}$destroy(){const{children:e,beforeDestroy:t,afterDestroy:n}=this.$ctx;t&&t(),d(),this.$umount();for(let t in e)e[t].anchor[w]=null;for(let e in this)"array"===Y(this[e])?this[e].clear():this[e]=null;delete this.$ctx;const r=p();return n&&n(),r}},fe=[{t:0}],he=class extends pe{constructor(...e){super(fe),this.$ctx.nodeInfo.element.append(...e),this.$ctx.elements=e}get $el(){return this.$ctx.elements}},me=[{t:0},[["t"]]],be=class extends pe{constructor(e){d(),super(me),this.text=e,p()}};((e,t)=>{for(let n in t){const r=t[n],o={base:de(r.base),key:r.key||n},s=ce(o,r),a=le(o,r);Object.defineProperty(e.prototype,n,{get:s,set:a,enumerable:!0,configurable:!1})}})(be,{text:{key:"t"}}),k.EFBaseComponent=pe,k.EFNodeWrapper=he,k.toEFComponent=e=>null==e||e instanceof pe?e:e!==re?I.isNodeInstance(e)?new he(e):new be("string"==typeof e?e:JSON.stringify(e)):void 0;const ye=(e,t)=>{const n=Y(t);switch(n){case"array":{const[n,...r]=t;if("object"===Y(n)){e.__used_tags[n.t]=!0,n.a&&((e,t)=>{for(let n in e)if(0===n.indexOf("xmlns:")){const[,r]=n.split(":");t.__local_namespaces[r]=e[n]}})(n.a,e);for(let t of r)ye(e,t)}break}case"object":if(t.t>1)throw new TypeError(`[EF] Not a standard ef.js AST: Unknown mount point type '${t.t}'`);se(t.t,t.n,e);break;case"string":break;default:throw new TypeError(`[EF] Not a standard ef.js AST: Unknown node type '${n}'`)}},ve=(e,t)=>{const n=class extends pe{constructor(t,n){d(),super(e,n),t&&this.$update(t),p()}};return t&&Object.defineProperty(n,"name",{value:t}),Object.defineProperty(n.prototype,"constructor",{enumerable:!1}),Object.defineProperty(n,"__local_namespaces",{enumerable:!1,value:{}}),Object.defineProperty(n,"__used_tags",{enumerable:!1,value:{}}),Object.defineProperty(n,"__component_ast",{enumerable:!1,value:e}),ye(n,e),n};class _e extends(ve([{t:"ui"},"I'm the totle",[{t:"li"},{n:"list",t:0}]])){}class ge extends(ve([{t:"ul"},"I'm the subtotle",[{t:"li"},{n:"list",t:1}]])){}class $e extends(ve([{t:"div"},"I'm the item"])){}(new class extends _e{constructor(){super();const e=new ge;e.list.push(new $e),this.list=e}}).$mount({target:document.body})})();